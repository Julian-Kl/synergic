(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("react");var n=e.n(t);const a=require("express");var o=e.n(a);const r=require("react-dom/server"),l=require("react-router-dom"),i=require("@mui/material/CssBaseline");var m=e.n(i);const c=e=>n().createElement(n().Fragment,null,n().createElement(m(),null),e.children),s=require("react-router"),d="http://localhost:1338",p=async(e,t,n)=>{const a={mode:"cors",cache:"no-cache",credentials:"same-origin"};t&&Object.assign(a,{method:t}),n&&Object.assign(a,{headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});let o=!0;const r=await fetch(e,a);return o=!1,{data:await r.json(),loading:false}},u=()=>{const[e,a]=(0,t.useState)([]),[o,r]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{(async()=>{const e=await p(`${d}/pages`);a(e.data),r(!1)})()}),[]),n().createElement(l.BrowserRouter,null,n().createElement(l.Link,{to:"/test"},"Test"),n().createElement(s.Switch,null,n().createElement(s.Route,{path:"/test"},"first route my friend")))},g=require("@mui/material/Box");var E=e.n(g);const h=require("@mui/material/Tab");var y=e.n(h);const x=require("@mui/material/Tabs");var b=e.n(x);const C=e=>{const t=(0,l.useLocation)();return n().createElement(E(),{sx:{maxWidth:"100%",borderBottom:2,borderColor:"divider"}},n().createElement(b(),{value:t.pathname,variant:"scrollable",scrollButtons:"auto","aria-label":"navbar"},e.routes.map((({path:e,name:t})=>n().createElement(y(),{key:e,label:t,component:l.Link,to:e,value:e})))))},v=()=>n().createElement("div",null,"Four Oh Four"),f=require("@mui/material"),S=require("react-helmet-async"),k=(0,t.createContext)(null),w=e=>{const[a,o]=(0,t.useState)(null),r=(0,t.useMemo)((()=>({component:a,setComponent:o})),[a,o]);return n().createElement(k.Provider,{value:r},e.children)},$=(0,t.createContext)(null),T=e=>{const[a,o]=(0,t.useState)(null),[r,l]=(0,t.useState)(null),i=(0,t.useMemo)((()=>({component:a,setComponent:o,id:r,setId:l})),[a,o,r,l]);return n().createElement($.Provider,{value:i},e.children)},P=(0,t.createContext)(null),G=e=>{const[a,o]=(0,t.useState)(null),r=(0,t.useMemo)((()=>({template:a,setTemplate:o})),[a,o]);return n().createElement(P.Provider,{value:r},e.children)},A="http://localhost:1337",F=require("@mui/icons-material/Check");var z=e.n(F);const B=e=>n().createElement(f.Paper,{elevation:3,style:{position:"absolute",border:"solid 1px rgba(25,118,210, 1)",borderRadius:2,padding:4}},n().createElement(f.Grid,{container:!0},n().createElement(f.Grid,{item:!0,xs:4,style:{padding:0}},n().createElement(f.Button,{color:"error",variant:"text",onClick:()=>e.saveCanges()},n().createElement(z(),{fontSize:"small"}))))),I={Headline:{name:"Headline",type:"atoms",props:{variant:["h1","h2","h3","h4","h5","h6"],element:["h1","h2","h3","h4","h5","h6"],text:"string"},defaultProps:{variant:"h1",element:"h1",text:"Lorem ipsum dolor sit amet"},component:e=>{const t=`headline headline-${e.variant}`;switch(e.element){default:return n().createElement("h1",{className:t},e.text);case"h2":return n().createElement("h2",{className:t},e.text);case"h3":return n().createElement("h3",{className:t},e.text);case"h4":return n().createElement("h4",{className:t},e.text);case"h5":return n().createElement("h5",{className:t},e.text);case"h6":return n().createElement("h6",{className:t},e.text)}},editableComponent:e=>{const[a,o]=(0,t.useState)(e.text),r=`headline headline-${e.variant} headline-editor`;return n().createElement(n().Fragment,null,n().createElement("textarea",{className:r,value:a,onChange:e=>o(e.target.value)}),n().createElement(B,{saveCanges:()=>e.saveChanges(a)}))}},Paragraph:{name:"Paragraph",type:"atoms",props:{text:"string"},defaultProps:{text:"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."},component:e=>n().createElement("p",{className:"paragraph"},e.text),editableComponent:e=>{const[a,o]=(0,t.useState)(e.text);return n().createElement(n().Fragment,null,n().createElement("textarea",{className:"paragraph paragraph-editor",value:a,onChange:e=>o(e.target.value),rows:10}),n().createElement(B,{saveCanges:()=>e.saveChanges(a)}))}}},O=require("@mui/icons-material/Add");var j=e.n(O);const q=require("@mui/icons-material/Delete");var R=e.n(q);const L=(0,f.styled)(f.Paper)((({theme:e})=>({...e.typography.body2,padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,boxShadow:"none",border:`solid 1px ${e.palette.primary.main}`,":hover":{backgroundColor:e.palette.primary.main,color:"white",cursor:"pointer"}}))),D=(0,f.styled)(f.Paper)((({theme:e})=>({...e.typography.body2,textAlign:"center",boxShadow:"none",border:`solid 1px ${e.palette.primary.main}`,backgroundColor:e.palette.primary.main,color:"white"}))),H=(0,f.styled)(f.Paper)((({theme:e})=>({...e.typography.body2,textAlign:"center",boxShadow:"none",border:`solid 1px ${e.palette.secondary.main}`,backgroundColor:e.palette.secondary.main,color:"white"}))),M=e=>e.selected?n().createElement(D,null,n().createElement(f.Grid,{container:!0},n().createElement(f.Grid,{item:!0,xs:8,style:{padding:8}},e.children," "),n().createElement(f.Grid,{item:!0,xs:4,style:{padding:0}},n().createElement(f.Button,{color:"inherit",onClick:()=>{e.id&&e.deleteComponent&&e.deleteComponent(e.id)}},n().createElement(R(),{fontSize:"medium"}))))):e.isAddAble?n().createElement(H,null,n().createElement(f.Grid,{container:!0},n().createElement(f.Grid,{item:!0,xs:8,style:{padding:8}},e.children," "),n().createElement(f.Grid,{item:!0,xs:4,style:{padding:0}},n().createElement(f.Button,{color:"inherit",onClick:()=>e.addComponentToCell(e.component)},n().createElement(j(),{fontSize:"medium"}))))):n().createElement(L,null,e.children),N=e=>n().createElement(n().Fragment,null,Object.keys(I).map((t=>n().createElement(f.Grid,{key:I[t].name,item:!0,xs:2},n().createElement(M,{isAddAble:e.isAddAble,addComponentToCell:e.addComponentToCell,component:I[t]},I[t].name))))),U=(0,t.createContext)(null),W=e=>{const[a,o]=(0,t.useState)(null),[r,l]=(0,t.useState)(null),i=(0,t.useMemo)((()=>({component:a,setComponent:o,id:r,setId:l})),[a,o,r,l]);return n().createElement(U.Provider,{value:i},e.children)},Y=require("@mui/icons-material/AddCircle");var J=e.n(Y);const _=require("@mui/system"),K=require("@mui/icons-material/Close");var Q=e.n(K);const V=e=>{const[a,o]=(0,t.useState)(!1),[r,l]=(0,t.useState)("");return a?n().createElement(f.Grid,{item:!0,xs:"auto",style:{paddingBottom:16,paddingRight:16,backgroundColor:"lightGray",borderRadius:4}},n().createElement(_.Box,{sx:{flexGrow:1}},n().createElement(f.Grid,{container:!0,spacing:2},n().createElement(f.Grid,{item:!0,xs:"auto"},n().createElement(f.TextField,{id:"outlined-basic",label:"Name",variant:"outlined",size:"small",onChange:e=>l(e.target.value)})),n().createElement(f.Grid,{item:!0,xs:"auto"},n().createElement(f.Button,{variant:"contained",color:"success",onClick:()=>{e.createComponent(r),o(!1)}},n().createElement(z(),{fontSize:"medium"})),n().createElement(f.Button,{variant:"contained",color:"error",onClick:()=>o(!1)},n().createElement(Q(),{fontSize:"medium"})))))):n().createElement(f.Grid,{item:!0,xs:3},n().createElement(f.Button,{variant:"contained",onClick:()=>{o(!0)}},n().createElement(J(),{fontSize:"medium"})))},X=()=>n().createElement(f.Backdrop,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0},n().createElement(f.CircularProgress,{color:"inherit"})),Z=e=>{const a=(0,t.useContext)(k),o=(0,t.useContext)($),r=(0,t.useContext)(U),[l,i]=(0,t.useState)([]),[m,c]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{const t=await p(`${A}/${e.components}`);i(t.data),c(!1)})()}),[]);const s=async t=>{if(t){const n=await p(`${A}/${e.components}/${t}`,"DELETE"),o=l.filter((function(e){return e.id!=n.data.id}));i([...o]),a?.setComponent(null),r?.setComponent(null),r?.setId(null)}},d=e=>e.id===a?.component?.id&&e.type===a?.component?.type;return n().createElement(n().Fragment,null,m&&n().createElement(X,null),l&&l.map(((t,l)=>n().createElement(f.Grid,{key:t.id,item:!0,xs:2,onClick:()=>(e=>{a?.setComponent(e),o?.setComponent(null),o?.setId(null),r?.setComponent(null),r?.setId(null)})(t)},n().createElement(M,{selected:d(t),deleteComponent:s,index:l,id:t.id,isAddAble:e.isAddAble&&!d(t),addComponentToCell:e.addComponentToCell,component:t},t.name)))),e.isCreateable&&n().createElement(V,{components:e.components,createComponent:async t=>{if(t){const n=await p(`${A}/${e.components}`,"POST",{name:t,settings:[],grid:[]});l.push(n.data),i([...l])}}}))},ee=e=>{const a=(0,t.useContext)(k),o=(0,t.useContext)($),r=(0,t.useContext)(P),l=e=>!(!o?.component&&!r?.template)&&("molecules"===a?.component?.type&&"atoms"===e||("organisms"===a?.component?.type&&("atoms"===e||"molecules"===e)||"templates"===r?.template?.type)),i=async e=>{if(a?.component&&null!=o?.id){const t=Object.assign({},a?.component);"atoms"===e.type&&(e.props=e.defaultProps),t.grid[o?.id].components.push(e);(await p(`${A}/${a?.component?.type}/${a?.component?.id}`,"PUT",{grid:t.grid})).loading||a?.setComponent(t)}},m=async e=>{const t=Object.assign({},r?.template);t.organisms.push(e);(await p(`${A}/templates/${r?.template?.id}`,"PUT",{organisms:t.organisms})).loading||r?.setTemplate(t)};return"atoms"===e.components?n().createElement(f.Box,{sx:{flexGrow:1}},n().createElement(f.Grid,{container:!0,spacing:2},n().createElement(N,{isAddAble:l("atoms"),addComponentToCell:i}))):n().createElement(f.Box,{sx:{flexGrow:1}},n().createElement(f.Grid,{container:!0,spacing:2},n().createElement(Z,{components:e.components,isAddAble:l(e.components),addComponentToCell:a?.component?i:m,isCreateable:e.isCreateable})))};function te(e){const{children:t,value:a,index:o,...r}=e;return n().createElement("div",{role:"tabpanel",hidden:a!==o,id:`simple-tabpanel-${o}`,"aria-labelledby":`simple-tab-${o}`,style:{width:"100%",overflowY:"scroll"},...r},a===o&&n().createElement(E(),{sx:{p:3}},t))}function ne(e){return{id:`vertical-tab-${e}`,"aria-controls":`vertical-tabpanel-${e}`}}const ae=e=>{const[t,a]=n().useState(e.organisms?2:0);return n().createElement(E(),{sx:{flexGrow:1,bgcolor:"background.paper",display:"flex",height:160,borderBottom:2,borderColor:"#1565c0"}},n().createElement(E(),null,n().createElement(b(),{value:t,onChange:(e,t)=>{a(t)},orientation:"vertical","aria-label":"component browser"},n().createElement(y(),{label:"Atoms",...ne(0),disabled:e.organisms}),n().createElement(y(),{label:"Molecules",...ne(1),disabled:e.organisms}),n().createElement(y(),{label:"Organisms",...ne(2)}))),n().createElement(te,{value:t,index:0},n().createElement(ee,{components:"atoms",isCreateable:e.isCreateable})),n().createElement(te,{value:t,index:1},n().createElement(ee,{components:"molecules",isCreateable:e.isCreateable})),n().createElement(te,{value:t,index:2},n().createElement(ee,{components:"organisms",isCreateable:e.isCreateable})))},oe=require("@mui/material/Grid");var re=e.n(oe);const le=require("@mui/material/Paper");var ie=e.n(le);const me=require("@mui/material/styles"),ce=(0,f.styled)(f.Paper)((({theme:e})=>({boxShadow:"none",":hover":{border:`solid 1px ${e.palette.primary.light}`},border:"solid 1px transparent",borderRadius:0}))),se=(0,f.styled)(f.Paper)((({theme:e})=>({boxShadow:"none",border:`solid 1px ${e.palette.primary.light}`,borderRadius:0}))),de=(0,f.styled)(f.Paper)((({theme:e})=>({boxShadow:"none",":hover":{border:`solid 1px ${e.palette.secondary.light}`},border:"solid 1px transparent",borderRadius:0}))),pe=(0,f.styled)(f.Paper)((({theme:e})=>({boxShadow:"none",border:`solid 1px ${e.palette.secondary.light}`,borderRadius:0}))),ue=e=>{const a=(0,t.useContext)(U),o=()=>{const t=e.component.name;if(t in I){const a=I[t];return n().createElement(a.component,e.component.props)}console.log(`Component with name ${e.component.name} not found`)};return e.selectAble?e.selected&&a?.id===e.id&&"atoms"===a?.component?.type?n().createElement(pe,null,o()):n().createElement(de,{onClick:()=>{void 0!==e.id&&(a?.setComponent(e.component),a?.setId(e.id))}},o()):n().createElement(n().Fragment,null,o())},ge=e=>{const a=(0,t.useContext)(U),o=e=>n().createElement(n().Fragment,null,e.map(((e,t)=>{if("atoms"===e.type)return n().createElement(ue,{key:t,component:e,selectAble:!1})}))),r=()=>n().createElement("div",{style:{color:"red"}},"Molecule ",e.component.name," is empty or misses grid"),l=()=>{return e.component.grid.length>1?(t=e.component.grid,n().createElement(f.Grid,{container:!0,spacing:2},t.map(((e,t)=>n().createElement(f.Grid,{key:t,item:!0,xs:e.size},o(e.components)))))):1===e.component.grid.length&&12===e.component.grid[0].size?o(e.component.grid[0].components):r();var t};return e.selectAble?e.selected&&a?.id===e.id&&"molecules"===a?.component?.type?n().createElement(pe,null,l()):n().createElement(de,{onClick:()=>{void 0!==e.id&&(a?.setComponent(e.component),a?.setId(e.id))}},l()):n().createElement(n().Fragment,null,l())},Ee=e=>e.components.length>0?n().createElement(n().Fragment,null,e.components.map(((t,a)=>"atoms"===t.type?n().createElement(ue,{key:a,component:t,selected:e.selected,selectAble:!0,id:a}):n().createElement(ge,{key:a,selected:e.selected,component:t,selectAble:!0,id:a})))):n().createElement(f.Skeleton,{variant:"text",animation:!1}),he=e=>e.selected?n().createElement(se,null,n().createElement(Ee,{components:e.gridElement.components,selected:e.selected})):n().createElement(ce,null,n().createElement(Ee,{components:e.gridElement.components})),ye=(0,me.styled)(ie())((({theme:e})=>({...e.typography.body2,color:e.palette.text.secondary,boxShadow:"none",padding:0,borderRadius:0}))),xe=()=>{const e=(0,t.useContext)(k),a=(0,t.useContext)($),[o,r]=(0,t.useState)([]),[l,i]=(0,t.useState)(12);(0,t.useEffect)((()=>{void 0!==e?.component?.grid&&r(e?.component?.grid),"molecules"===e?.component?.type?i(6):"organisms"===e?.component?.type&&i(12)}),[e?.component]);return n().createElement(n().Fragment,null,e?.component&&n().createElement(n().Fragment,null,n().createElement(E(),{sx:{flexGrow:1}},n().createElement(re(),{container:!0,spacing:1},n().createElement(re(),{item:!0,xs:"auto"},n().createElement(f.Typography,{variant:"body1"},"Display Width")),n().createElement(re(),{item:!0,xs:2},n().createElement(f.Slider,{value:l,onChange:(e,t)=>{i(t)},step:1,marks:!0,min:1,max:12})))),n().createElement(re(),{container:!0,spacing:0,columns:12,style:{paddingTop:40,paddingLeft:0,height:700,backgroundColor:"lightgray",overflowY:"scroll"}},n().createElement(re(),{item:!0,xs:l,style:{marginLeft:"auto",marginRight:"auto"}},n().createElement(ye,null,n().createElement(E(),{sx:{flexGrow:1}},n().createElement(re(),{container:!0,spacing:0},e?.component?.grid&&e?.component?.grid.map(((e,t)=>a?.id!=t?n().createElement(re(),{key:t,item:!0,xs:e.size,onClick:()=>((e,t)=>{a?.setComponent(e),a?.setId(t)})(e,t)},n().createElement(he,{key:t,gridElement:e,selected:t===a?.id})):n().createElement(re(),{key:t,item:!0,xs:a?.component?.size},n().createElement(he,{key:t,gridElement:e,selected:t===a?.id})))),n().createElement(re(),{item:!0,xs:2,style:{display:"flex",justifyContent:"flex-start"}},n().createElement(f.Button,{variant:"contained",onClick:async()=>{null!=o?o.push({size:3,settings:[],components:[]}):r([{size:3,settings:[],components:[]}]);(await p(`${A}/${e?.component?.type}/${e?.component?.id}`,"PUT",{grid:o})).loading||r([...o])}},n().createElement(J(),{fontSize:"medium"}))))))))))},be=()=>{const e=(0,t.useContext)(k),a=(0,t.useContext)($),o=(0,t.useContext)(U),[r,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{if("atoms"===o?.component?.type){const e=o?.component;e.name in I&&l(I[e.name].props)}}),[o?.component]);const i=t=>{let r="";if("atoms"===o?.component?.type)for(const e of Object.entries(o?.component?.props))e[0]===t.name&&(r=e[1]);return n().createElement(f.FormControl,{fullWidth:!0},n().createElement(f.InputLabel,{id:"demo-simple-select-label"},t.name),n().createElement(f.Select,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:r,label:t.name,onChange:n=>(async(t,n,o)=>{const r=Object.assign({},e?.component);if(null!=a?.id&&"atoms"===r.grid[a?.id].components[t].type){const e=r.grid[a?.id].components[t];e.props[n]=o,r.grid[a?.id].components[t]=e}(await p(`${A}/${e?.component?.type}/${e?.component?.id}`,"PUT",{grid:r.grid})).loading||e?.setComponent(r)})(o?.id,t.name,n.target.value)},t.values.map(((e,t)=>n().createElement(f.MenuItem,{value:e,key:t},e)))))};return n().createElement(n().Fragment,null,o?.component&&n().createElement(n().Fragment,null,n().createElement(f.Typography,{variant:"h6",component:"h3"},"atoms"===o?.component?.type?"Atom Settings":"Molecule Settings"),n().createElement(f.Typography,{variant:"body1",component:"p"},"Name: ",o?.component.name),(()=>{const e=[];if(r)for(const t of Object.entries(r))"object"==typeof t[1]&&e.push({name:t[0],values:t[1]});return e.map(((e,t)=>n().createElement(n().Fragment,{key:t},i(e))))})(),n().createElement(f.Divider,null),n().createElement(f.Button,{variant:"contained",color:"error",endIcon:n().createElement(R(),null),onClick:()=>{void 0!==o?.component&&(async t=>{const n=a?.component?.components.filter((function(e,n,a){return n!=t}));if(null!=a?.id&&n&&a){const t=Object.assign({},e?.component);t.grid[a?.id].components=n,(await p(`${A}/${e?.component?.type}/${e?.component?.id}`,"PUT",{grid:t.grid})).loading||e?.setComponent(t)}})(o?.id)}},"atoms"===o?.component?.type?"Delete Atom":"Delete Molecule")))},Ce=()=>{const e=(0,t.useContext)($),a=(0,t.useContext)(k),[o,r]=(0,t.useState)([]),l=(0,t.useContext)(U);(0,t.useEffect)((()=>{void 0!==a?.component?.grid&&r(a?.component?.grid)}));return n().createElement(n().Fragment,null,e?.component?.size&&n().createElement(n().Fragment,null,n().createElement(f.Typography,{variant:"h6",component:"h3"},"Cell Settings"),n().createElement(f.Divider,null),n().createElement(f.Typography,{variant:"body1",component:"p"},"GridSize"),n().createElement(f.Slider,{value:e?.component?.size,onChange:(t,n)=>(async(t,n)=>{if(e&&e.component){const o=Object.assign({},e.component);if(o.size=t,e.setComponent(o),null!=n){const t=Object.assign({},a?.component);t.grid[n]=e.component,(await p(`${A}/${a?.component?.type}/${a?.component?.id}`,"PUT",{grid:t.grid})).loading||a?.setComponent(t)}}})(n,e?.id),step:1,marks:!0,min:1,max:12}),n().createElement(f.Divider,null),n().createElement(f.Button,{variant:"contained",color:"error",endIcon:n().createElement(R(),null),onClick:()=>(async()=>{const t=o.filter((function(t,n,a){return n!=e?.id}));if(!(await p(`${A}/${a?.component?.type}/${a?.component?.id}`,"PUT",{grid:t})).loading){const n=Object.assign({},a?.component);n.grid=t,a?.setComponent(n),e?.setComponent(null),e?.setId(null),l?.setComponent(null),l?.setId(null)}})()},"Delete Cell")))},ve=(0,f.styled)(f.Paper)((({theme:e})=>({textAlign:"center",boxShadow:"none",borderRight:`solid 2px ${e.palette.primary.main}`,borderRadius:0,minHeight:"100%",padding:24}))),fe=(0,f.styled)(f.Paper)((({theme:e})=>({textAlign:"center",boxShadow:"none",borderLeft:`solid 2px ${e.palette.primary.main}`,borderRadius:0,minHeight:"100%",padding:24}))),Se=(0,t.createContext)(null),ke=e=>{const[a,o]=(0,t.useState)(null),r=(0,t.useMemo)((()=>({page:a,setPage:o})),[a,o]);return n().createElement(Se.Provider,{value:r},e.children)},we=()=>{const e=(0,t.useContext)(Se),[a,o]=(0,t.useState)([]),[r,l]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{const e=await p(`${A}/templates`);o(e.data),l(!1)})()}),[]);const i=e=>{const t=e=>{return"atoms"===e.type?{name:(t=e).name,props:t.props}:"molecules"===e.type?(e=>{const t={grid:[]};return e.grid.map((e=>{const a={size:e.size,components:n(e.components)};t.grid.push(a)})),t})(e):void("organisms"===e.type&&console.log("error, componente is organism"));var t},n=e=>{const n=[];return e.map((e=>{const a=t(e);a&&n.push(a)})),n};return(e=>{const t=[];return e.map((e=>{const a={grid:[]};e.grid.map((e=>{const t={size:e.size,components:n(e.components)};a.grid.push(t)})),t.push(a)})),t})(e.organisms)},m=async t=>{const n=await(async e=>{const t=await p(`${A}/templates/${e}`,"GET");if(!t.loading)return t.data})(t.target.value),a=Object.assign({},e?.page);a.templateId=String(n.id),a.content=i(n),i(n);(await p(`${d}/pages/${e?.page?.id}`,"PUT",{templateId:a.templateId,content:a.content})).loading||e?.setPage(a)},c=async(t,n)=>{const a=Object.assign({},e?.page);a[t]=n;(await p(`${d}/pages/${e?.page?.id}`,"PUT",{[t]:a[t]})).loading||e?.setPage(a)};return n().createElement(n().Fragment,null,r&&n().createElement(X,null),e?.page&&n().createElement(f.Box,{sx:{flexGrow:1,bgcolor:"background.paper",display:"flex",height:"auto",padding:2,borderBottom:2,borderColor:"#1565c0"}},n().createElement(f.Box,{sx:{minWidth:120}},n().createElement(f.Typography,{variant:"h6",component:"h3"},"Settings")),n().createElement(f.Box,{sx:{minWidth:240}},n().createElement(f.FormControl,{fullWidth:!0},n().createElement(f.InputLabel,{id:"demo-simple-select-label"},"Template"),n().createElement(f.Select,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e?.page?.templateId?e?.page?.templateId:"",label:"Template",onChange:e=>m(e)},a.map(((e,t)=>n().createElement(f.MenuItem,{key:t,value:e.id},e.name)))))),n().createElement(f.Box,{sx:{marginLeft:4}},n().createElement(f.TextField,{label:"Route",color:"primary",value:e?.page?.route?e?.page?.route:"",onChange:e=>c("route",e.target.value)})),n().createElement(f.Box,{sx:{marginLeft:4}},n().createElement(f.TextField,{label:"Title",color:"primary",value:e?.page?.title?e?.page?.title:"",onChange:e=>c("title",e.target.value)}))))},$e=e=>{const[a,o]=(0,t.useState)(!1),[r,l]=(0,t.useState)("");return a?n().createElement(f.Grid,{item:!0,xs:12,style:{marginTop:32,paddingBottom:16,paddingTop:16,paddingRight:16,backgroundColor:"lightGray",borderRadius:4}},n().createElement(_.Box,{sx:{flexGrow:1}},n().createElement(f.Grid,{container:!0,spacing:2},n().createElement(f.Grid,{item:!0,xs:12},n().createElement(f.TextField,{id:"outlined-basic",label:"Name",variant:"outlined",size:"small",onChange:e=>l(e.target.value)})),n().createElement(f.Grid,{item:!0,xs:12},n().createElement(f.Button,{variant:"contained",color:"success",onClick:()=>{e.createComponent(r),o(!1)}},n().createElement(z(),{fontSize:"medium"})),n().createElement(f.Button,{variant:"contained",color:"error",onClick:()=>o(!1)},n().createElement(Q(),{fontSize:"medium"})))))):n().createElement(f.Grid,{item:!0,xs:12},n().createElement(f.Button,{variant:"contained",onClick:()=>{o(!0)}},n().createElement(J(),{fontSize:"medium"})))},Te=(0,f.styled)(f.Paper)((({theme:e})=>({...e.typography.body2,padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,boxShadow:"none",border:`solid 1px ${e.palette.primary.main}`,":hover":{backgroundColor:e.palette.primary.main,color:"white",cursor:"pointer"}}))),Pe=(0,f.styled)(f.Paper)((({theme:e})=>({...e.typography.body2,textAlign:"center",boxShadow:"none",border:`solid 1px ${e.palette.primary.main}`,backgroundColor:e.palette.primary.main,color:"white"}))),Ge=e=>e.selected?n().createElement(Pe,null,n().createElement(f.Grid,{container:!0},n().createElement(f.Grid,{item:!0,xs:8,style:{padding:8}},e.children," "),n().createElement(f.Grid,{item:!0,xs:4,style:{padding:0}},n().createElement(f.Button,{color:"inherit",onClick:()=>{e.id&&e.deletePage&&e.deletePage(e.id)}},n().createElement(R(),{fontSize:"medium"}))))):n().createElement(Te,null,e.children),Ae=()=>{const e=(0,t.useContext)(Se),[a,o]=(0,t.useState)([]),[r,l]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{const e=await p(`${d}/pages`);o(e.data),l(!1)})()}),[e]);const i=async t=>{if(t){const n=await p(`${d}/pages/${t}`,"DELETE"),r=a.filter((function(e){return e.id!=n.data.id}));o([...r]),e?.setPage(null)}},m=t=>t.id===e?.page?.id;return n().createElement(n().Fragment,null,r&&n().createElement(X,null),n().createElement(f.Grid,{container:!0,spacing:2},a&&a.map((t=>n().createElement(f.Grid,{key:t.id,item:!0,xs:12,onClick:()=>(t=>{e?.setPage(t)})(t)},n().createElement(Ge,{id:t.id,deletePage:i,selected:m(t)},t.name)))),n().createElement($e,{components:"templates",createComponent:async e=>{if(e){const t=await p(`${d}/pages`,"POST",{name:e,title:e,route:encodeURIComponent(e),template:"",structure:[],content:[]});a.push(t.data),o([...a])}}})))},Fe=require("@mui/styled-engine");var ze=e.n(Fe);const Be=(0,t.createContext)(null),Ie=e=>{const[a,o]=(0,t.useState)(null),[r,l]=(0,t.useState)(null),i=(0,t.useMemo)((()=>({atom:a,setAtom:o,locator:r,setLocator:l})),[a,o,r,l]);return n().createElement(Be.Provider,{value:i},e.children)},Oe=ze()(f.Paper)((()=>({boxShadow:"none",":hover":{border:"solid 1px rgba(25,118,210, .5)"},border:"solid 1px transparent",borderRadius:0}))),je=ze()(f.Paper)((()=>({boxShadow:"none",border:"solid 1px rgba(25,118,210, .5)",borderRadius:0}))),qe=e=>{const a=(0,t.useContext)(Se),o=(0,t.useContext)(Be),r=()=>{o?.setAtom(e.component),o?.setLocator(e.locator)};return o?.locator===e.locator?n().createElement(je,{onClick:r},(()=>{if(o?.atom){const t=o?.atom?.name;if(t in I){const r=I[t];if(a?.page){let t=a?.page;const l=[];let i;if(l.push(t),e.locator.forEach((e=>{t=t[e],l.push(t)})),"text"in t.props){i=r.editableComponent;const e=async e=>{t.props.text=e;const n=[...l].reverse();let r=t.props;n.forEach((e=>{r=e}));const i=r;(await p(`${d}/pages/${a?.page?.id}`,"PUT",{content:i.content})).loading||(a?.setPage(i),o.setAtom(null),o.setLocator(null))};t.props.saveChanges=e}else i=r.component;return n().createElement(i,t.props)}console.log("No page currently edited")}}})()):n().createElement(Oe,{onClick:r},(()=>{const t=e.component.name;if(t in I){const a=I[t];return n().createElement(a.component,e.component.props)}console.log(`Component with name ${e.component.name} not found`)})())},Re=e=>n().createElement(f.Grid,{item:!0,xs:e.gridItem.size},e.gridItem.components.map(((t,a)=>"grid"in t?n().createElement(Le,{key:a,component:t,locator:e.locator.concat(["components",a])}):"name"in t?n().createElement(qe,{key:a,component:t,locator:e.locator.concat(["components",a])}):void 0))),Le=e=>n().createElement(f.Grid,{container:!0,spacing:2},e.component.grid.map(((t,a)=>n().createElement(Re,{key:a,gridItem:t,locator:e.locator.concat(["grid",a])})))),De=()=>{const e=(0,t.useContext)(Se);return n().createElement(n().Fragment,null,e?.page?.content.map(((e,t)=>n().createElement(Le,{key:t,component:e,locator:["content",t]}))))},He=(0,t.createContext)(null),Me=e=>{const[a,o]=(0,t.useState)(null),[r,l]=(0,t.useState)(null),i=(0,t.useMemo)((()=>({component:a,setComponent:o,id:r,setId:l})),[a,o,r,l]);return n().createElement(He.Provider,{value:i},e.children)},Ne=e=>{return e.organism.grid.length>1?(t=e.organism.grid,n().createElement(f.Grid,{container:!0,spacing:2},t.map(((e,t)=>n().createElement(f.Grid,{key:t,item:!0,xs:e.size},e.components.map(((e,t)=>"atoms"===e.type?n().createElement(ue,{key:t,component:e}):"molecules"===e.type?n().createElement(ge,{key:t,component:e}):void 0))))))):1===e.organism.grid.length?12===e.organism.grid[0].size?n().createElement(n().Fragment,null,e.organism.grid[0].components.map(((e,t)=>"atoms"===e.type?n().createElement(ue,{key:t,component:e}):"molecules"===e.type?n().createElement(ge,{key:t,component:e}):void 0))):n().createElement("div",null,"need grid"):n().createElement("div",{style:{color:"red"}},"Organism ",e.organism.name," is empty");var t},Ue=()=>{const e=(0,t.useContext)(P);(0,t.useContext)(He);return n().createElement(n().Fragment,null,e?.template?.organisms.map(((e,t)=>n().createElement(Ne,{key:t,organism:e}))))},We=e=>n().createElement(f.Typography,{variant:"body1",component:"p",align:"left"},e.name,n().createElement(f.Button,{color:"inherit",variant:"text",onClick:()=>e.deleteFunction()},n().createElement(R(),{fontSize:"small"}))),Ye=()=>{const e=(0,t.useContext)($),a=(0,t.useContext)(k),o=(0,t.useContext)(P);let r,l=[];e?.component?.components?(l=e?.component?.components,r=!1):o?.template?.organisms&&(l=o?.template?.organisms,r=!0);return n().createElement(n().Fragment,null,n().createElement(f.Typography,{variant:"h6",component:"h3"},"Cell Children"),n().createElement(f.Divider,null),l.map(((t,l)=>n().createElement(n().Fragment,{key:l},n().createElement(We,{name:t.name,id:l,deleteFunction:r?()=>(async e=>{if(o?.template){const t=o?.template?.organisms.filter((function(t,n,a){return n!=e})),n=Object.assign({},o?.template);n.organisms=t,(await p(`${A}/templates/${o?.template?.id}`,"PUT",{organisms:n.organisms})).loading||o?.setTemplate(n)}})(l):()=>(async t=>{const n=e?.component?.components.filter((function(e,n,a){return n!=t}));if(null!=e?.id&&n&&e){const t=Object.assign({},a?.component);t.grid[e?.id].components=n,(await p(`${A}/${a?.component?.type}/${a?.component?.id}`,"PUT",{grid:t.grid})).loading||a?.setComponent(t)}})(l)}),n().createElement(f.Divider,null)))))},Je=(0,f.styled)(f.Paper)((({theme:e})=>({...e.typography.body2,padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,boxShadow:"none",border:`solid 1px ${e.palette.primary.main}`,":hover":{backgroundColor:e.palette.primary.main,color:"white",cursor:"pointer"}}))),_e=(0,f.styled)(f.Paper)((({theme:e})=>({...e.typography.body2,textAlign:"center",boxShadow:"none",border:`solid 1px ${e.palette.primary.main}`,backgroundColor:e.palette.primary.main,color:"white"}))),Ke=e=>e.selected?n().createElement(_e,null,n().createElement(f.Grid,{container:!0},n().createElement(f.Grid,{item:!0,xs:8,style:{padding:8}},e.children," "),n().createElement(f.Grid,{item:!0,xs:4,style:{padding:0}},n().createElement(f.Button,{color:"inherit",onClick:()=>{e.id&&e.deleteTemplate&&e.deleteTemplate(e.id)}},n().createElement(R(),{fontSize:"medium"}))))):n().createElement(Je,null,e.children),Qe=()=>{const e=(0,t.useContext)(P),[a,o]=(0,t.useState)([]),[r,l]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(async()=>{const e=await p(`${A}/templates`);o(e.data),l(!1)})()}),[]);const i=async t=>{if(t){const n=await p(`${A}/templates/${t}`,"DELETE"),r=a.filter((function(e){return e.id!=n.data.id}));o([...r]),e?.setTemplate(null)}},m=t=>t.id===e?.template?.id;return n().createElement(n().Fragment,null,r&&n().createElement(X,null),n().createElement(f.Grid,{container:!0,spacing:2},a&&a.map((t=>n().createElement(f.Grid,{key:t.id,item:!0,xs:12,onClick:()=>(t=>{e?.setTemplate(t)})(t)},n().createElement(Ke,{id:t.id,deleteTemplate:i,selected:m(t)},t.name)))),n().createElement($e,{components:"templates",createComponent:async e=>{if(e){const t=await p(`${A}/templates`,"POST",{name:e,settings:[],organisms:[]});a.push(t.data),o([...a])}}})))},Ve=[{path:"/",name:"Start",exact:!0,component:()=>n().createElement(n().Fragment,null,n().createElement(S.Helmet,null,n().createElement("title",null,"Home"),n().createElement("meta",{name:"description",content:"This is Home"})),n().createElement(f.Typography,{variant:"h1",component:"h1",gutterBottom:!0},"Synergic"),n().createElement(f.Typography,{variant:"h2",component:"h2",gutterBottom:!0},"Atomic Design Page Builder"))},{path:"/components",name:"Components",exact:!0,component:()=>n().createElement(n().Fragment,null,n().createElement(S.Helmet,null,n().createElement("title",null,"Components"),n().createElement("meta",{name:"description",content:"This is the Component Editor"})),n().createElement(w,null,n().createElement(T,null,n().createElement(W,null,n().createElement(ae,{isCreateable:!0}),n().createElement(f.Grid,{container:!0,style:{minHeight:"70vh"}},n().createElement(f.Grid,{item:!0,xs:2},n().createElement(ve,null,n().createElement(Ce,null),n().createElement(f.Divider,{variant:"fullWidth"}),n().createElement(be,null))),n().createElement(f.Grid,{item:!0,xs:10},n().createElement(xe,null)))))))},{path:"/templates",name:"Templates",exact:!0,component:()=>n().createElement(n().Fragment,null,n().createElement(S.Helmet,null,n().createElement("title",null,"Template Editor"),n().createElement("meta",{name:"description",content:"This is the Template Editor"})),n().createElement(G,null,n().createElement(Me,null,n().createElement(ae,{organisms:!0}),n().createElement(f.Grid,{container:!0,style:{minHeight:"90vh"}},n().createElement(f.Grid,{item:!0,xs:2},n().createElement(ve,null,n().createElement(f.Typography,{variant:"h6",component:"h3"},"Templates"),n().createElement(Qe,null))),n().createElement(f.Grid,{item:!0,xs:8},n().createElement(Ue,null)),n().createElement(fe,null,n().createElement(Ye,null))))))},{path:"/pages",name:"Pages",exact:!0,component:()=>n().createElement(n().Fragment,null,n().createElement(S.Helmet,null,n().createElement("title",null,"Page Editor"),n().createElement("meta",{name:"description",content:"This is the Page Editor"})),n().createElement(ke,null,n().createElement(Ie,null,n().createElement(f.Grid,{container:!0,style:{minHeight:"90vh"}},n().createElement(f.Grid,{item:!0,xs:2},n().createElement(ve,null,n().createElement(f.Typography,{variant:"h6",component:"h3"},"Pages"),n().createElement(Ae,null))),n().createElement(f.Grid,{item:!0,xs:10},n().createElement(we,null),n().createElement(De,null))))))},{path:"/preview",name:"Preview",exact:!1,component:()=>n().createElement(S.HelmetProvider,null,n().createElement(f.CssBaseline,null),n().createElement(u,null))}],Xe=()=>n().createElement(n().Fragment,null,n().createElement(C,{routes:Ve}),n().createElement(l.Switch,null,Ve.map((({path:e,exact:t,component:a},o)=>n().createElement(l.Route,{key:o,path:e,exact:t},((e,t)=>"/preview"!=e?t:n().createElement(u,null))(e,a)))),n().createElement(l.Route,{key:"404",render:()=>n().createElement(v,null)}))),Ze=()=>n().createElement("div",{style:{minHeight:"100vh"}},n().createElement(c,null,n().createElement(Xe,null))),et=o()();et.use(o().static("public")),et.get("*",((e,t)=>{const a={},o=(0,r.renderToString)(n().createElement(S.HelmetProvider,{context:a},n().createElement(l.StaticRouter,{location:e.url},n().createElement(Ze,null))));t.send(((e,t)=>`\n<!DOCTYPE html>\n<html ${e.htmlAttributes.toString()} lang="de">\n  <head>\n    ${e.title.toString()}\n    ${e.meta.toString()}\n    ${e.link.toString()}\n    <meta charset="UTF-8">\n    <meta http-equiv="content-language” content="de-de”>\n    <meta name="viewport" content="width=device-width,initial-scale=1">\n    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">\n    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">\n    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">\n    <link rel="manifest" href="/favicon/site.webmanifest">\n    <link rel="stylesheet" type="text/css" href="/app.css" media="screen">\n    <script src="/modernizr-webp.js"><\/script>\n  </head>\n  <body ${e.bodyAttributes.toString()}>\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id="app">${t}</div>\n  </body>\n  <script src="/client.js" defer><\/script>\n</html>\n`)(a.helmet,o))})),et.listen(80,(()=>console.log("App listening on port 80!")))})();